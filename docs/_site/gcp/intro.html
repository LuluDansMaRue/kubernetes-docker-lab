<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.15.2 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Introduction üìñ - kubernetes-docker-lab</title>
<meta name="description" content="Learning how to deploy a web app from Docker to Kubernetes to GCloud">



<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="kubernetes-docker-lab">
<meta property="og:title" content="Introduction üìñ">
<meta property="og:url" content="http://localhost:4000/gcp/intro.html">













<link rel="canonical" href="http://localhost:4000/gcp/intro.html">













<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="kubernetes-docker-lab Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">kubernetes-docker-lab</a>
        <ul class="visible-links"></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          <span class="nav__sub-title">Docker</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/docker/intro" class="">Introduction to docker</a></li>
          
            
            

            
            

            <li><a href="/docker/example" class="">Example of deployment with Docker</a></li>
          
            
            

            
            

            <li><a href="/k8s/swarm" class="">Docker swarm</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Kubernetes knowledges</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/k8s/architecture" class="">Architecture</a></li>
          
            
            

            
            

            <li><a href="/k8s/deployment" class="">Deployment</a></li>
          
            
            

            
            

            <li><a href="/k8s/services" class="">Service</a></li>
          
            
            

            
            

            <li><a href="/k8s/storage" class="">Volumes</a></li>
          
            
            

            
            

            <li><a href="/k8s/cron" class="">Cron task</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Deploying an app to minikube</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/k8s/minikube" class="">Minikube</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>
    
  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Introduction üìñ">
    
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Introduction üìñ
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>We saw how to deploy our small project with Docker. We also saw how to deploy our project on a local Kubernetes cluster by using Minikube. Today we‚Äôre going to deploy our project into a real environment, Google Cloud Platform.</p>

<h2 id="why-google-cloud-platform-">Why Google Cloud Platform ‚ùì</h2>

<p>Along with Amazon EKS, Google Cloud Platform is one of the most popular deployment platform for Kubernetes. As it‚Äôs one of the most used we thought that it would have been interesting for you to learn how to deploy your app on it. Futhermore GCP offer you a $300 on 12months for beginning your journey into GCP. Thus it‚Äôs free for you to use during this timespan.</p>

<h2 id="configuration-Ô∏è">Configuration ‚öôÔ∏è</h2>

<p>If you‚Äôd follow the previous tutorial on how to deploy your app with Minikube then you shouldn‚Äôt be lost. This deployment is going to be pretty much the same. Otherwise I highly suggest you to read the previous set of tutorial on <a href="/k8s/deployment/example.html">how to deploy an app with Minikube</a></p>

<blockquote>
  <p>Before diving into the Google Cloud Platform you need to have obviously a Google account and already have create a Google Cloud Project. If not check how to create a google cloud project <a href="https://cloud.google.com/resource-manager/docs/creating-managing-projects">here</a></p>
</blockquote>

<h3 id="requirements-Ô∏è">Requirements ‚öôÔ∏è</h3>

<p>Deploying into GCP required you to have installed the components lists below:</p>

<ul>
  <li>GCloud SDK</li>
  <li>Kubectl</li>
  <li>Docker</li>
  <li>Your favorite editor (vscode, vim, emacs, nano, sublime up to you‚Ä¶ maybe Microsoft Word ?)</li>
</ul>

<h3 id="configure-gcloud-sdk-Ô∏è">Configure GCloud SDK ‚öôÔ∏è</h3>

<p>If you have already installed &amp; configure GCloud SDK you can skip this section.</p>

<p>Kubectl required an environment context for searching our clusters. In order to do that we need to sync our GCloud SDK so that the Kubectl environment will be sync with our project.</p>

<p>First, let‚Äôs create a gcloud configurations by running this command:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gcloud config configurations create bobba
</code></pre></div></div>

<p>If you run the command</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gcloud config configurations list
</code></pre></div></div>

<p>You should see a list of config like the image below</p>

<p align="center">
  <img src="../img/configurations_list.png" alt="drawing" width="500" />
</p>

<p>Now your configurations is created. However it‚Äôs not activate yet.
Let‚Äôs activate it by running this command</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gcloud config configurations activate bobba
</code></pre></div></div>

<p>And the final step. Log into GCloud so that you can retrieve your cluster for later use.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gcloud auth login
</code></pre></div></div>

<h3 id="type-of-cluster">Type of cluster</h3>

<p>With GCP there are 2 types of cluster.</p>

<ul>
  <li>
    <p>The first type is <code class="highlighter-rouge">zonal</code>. This mean that your nodes &amp; the master will be created in the zone that you choose. E.g you‚Äôre creating a cluster in asia-east1-c, your node &amp; master will be located in asia-east1-c</p>
  </li>
  <li>
    <p>The second type is <code class="highlighter-rouge">regional</code>. This allow you to choose which region to deploy your application. When choosing the region GCP will create your cluster across the zone of your region.</p>
  </li>
</ul>

<p>E.g:</p>

<ul>
  <li>Region: asia-east1</li>
  <li>Zone: asia-east1-a, asia-east1-b, asia-east1-c</li>
</ul>

<p>Creating a regional cluster this will create nodes &amp; master in these 3 zones.
<code class="highlighter-rouge">Region &gt; Zones</code>.
This kind of cluster has the advantage of reducing the number of downtime as low as possible. However it‚Äôs more expensive to use this type of cluster</p>

<p>For the sake of our deployment we‚Äôll choose the zonal cluster</p>

<p>For more information on regional cluster check this link <a href="https://cloud.google.com/kubernetes-engine/docs/concepts/regional-clusters">Regional cluster</a></p>

<h3 id="configure-your-cluster-Ô∏è">Configure your cluster ‚öôÔ∏è</h3>

<p>If you already have and know how to create a Cluster into GCP, you can also skip this section.</p>

<p>All right, let‚Äôs create a Cluster of type Zonal</p>

<ul>
  <li>Go to your GCP Account</li>
  <li>Go to <strong>Kubernetes engine section</strong></li>
  <li>Go to the <strong>Cluster</strong> option</li>
  <li>Click on the <strong>CREATE CLUSTER</strong> button</li>
  <li>Use the standard cluster (should be already selected)</li>
  <li>Deploy the <code class="highlighter-rouge">Advanced options</code> menu at the bottom of the webpage</li>
</ul>

<p>Check the options like below</p>

<p align="center">
  <img src="../img/gcp-config.png" alt="drawing" width="500" />
</p>

<ul>
  <li>Click on the create a button and wait a few minutes for your cluster to be created</li>
</ul>

<p>Once the Cluster is created click on your cluster and click on the <strong>CONNECT</strong> button.
You should see a popup with a section named <strong>Command line access</strong> which should look like below</p>

<p align="center">
  <img src="../img/gcp-cluster-connect.png" alt="drawing" width="500" />
</p>

<p>Copy, paste the <code class="highlighter-rouge">command-line access</code> to your terminal. You should get a message like so.</p>

<p align="center">
  <img src="../img/gcp-success-kcs.png" alt="drawing" width="500" />
</p>

<p>Now if you run the command</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kubctl config view
</code></pre></div></div>

<p>You should see the cluster to your list of context like the image below</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="pi">-</span> <span class="na">cluster</span><span class="pi">:</span>
    <span class="na">certificate-authority-data</span><span class="pi">:</span> <span class="s">REDACTED</span>
    <span class="na">server</span><span class="pi">:</span> <span class="s">&lt;IP_ADDRESS&gt;</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">gke_kubernetes-demo-232217_us-central1-a_bobba-cluster</span>
</code></pre></div></div>

<h4 id="great-lets-move-on-and-create-our-api-image-api-docker-image">Great let‚Äôs move on and create our API image <a href="/gcp/api.html">API Docker image</a></h4>

        
      </section>

      <footer class="page__meta">
        
        


        
      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2019 kubernetes-docker-lab. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script data-search-pseudo-elements defer src="https://use.fontawesome.com/releases/v5.7.1/js/all.js" integrity="sha384-eVEQC9zshBn0rFj4+TU78eNA19HMNigMviK/PU/FFjLXqa/GKPgX58rvt5Z8PLs7" crossorigin="anonymous"></script>








  </body>
</html>
